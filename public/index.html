<!DOCTYPE html>
<html>
<head>
<title>DM Screen</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<link rel="stylesheet" href="style.css">
<script src="data.js" defer></script>
<script src="main.js" defer></script>
</head>
<body>

<div class="container">
  <div class="header">
    <button id="open-player-window-btn" class="btn btn-secondary">
      <i class="fas fa-window-restore"></i> Avaa pelaajan näyttö
    </button>
    
    <div id="game-title-container">
      <select id="game-select">
        <option value="Dread Nights">Kauhun yöt</option>
        <option value="D&D 5e">D&D 5e</option>
      </select>
    </div>
    <div id="merchant-mode-indicator" class="merchant-mode-indicator hidden">
      <span>Merchant Mode Active</span>
      <button id="disable-merchant-mode" class="btn btn-sm btn-danger">Disable</button>
    </div>
  </div>

  <div class="tabs">
    <button class="tab-button active" data-tab="tab-prep">Valmistelu</button>
    <button class="tab-button" data-tab="tab-dm-screen">DM Screen</button>
  </div>

  <div id="tab-prep" class="tab-content active">
    <div class="prep-layout">
      <div class="prep-roadmap">
        <div class="prep-roadmap-step active" data-step="1">
          <span class="step-number">1</span>
          <span class="step-title">Killat</span>
        </div>
        <div class="prep-roadmap-step" data-step="2">
          <span class="step-number">2</span>
          <span class="step-title">Killan nimi</span>
        </div>
        <div class="prep-roadmap-step" data-step="3">
          <span class="step-number">3</span>
          <span class="step-title">Nimet</span>
        </div>
        <div class="prep-roadmap-step" data-step="4">
          <span class="step-number">4</span>
          <span class="step-title">Työnkuvat</span>
        </div>
        <div class="prep-roadmap-step" data-step="5">
          <span class="step-number">5</span>
          <span class="step-title">Stats</span>
        </div>
        <div class="prep-roadmap-step" data-step="6">
          <span class="step-number">6</span>
          <span class="step-title">Hyveet</span>
        </div>
        <div class="prep-roadmap-step" data-step="7">
          <span class="step-number">7</span>
          <span class="step-title">Paheet</span>
        </div>
        <div class="prep-roadmap-step" data-step="8">
          <span class="step-number">8</span>
          <span class="step-title">Omens</span>
        </div>
      </div>

      <div class="prep-content">
        <div class="prep-content-step active" data-step-content="1">
          <div class="guild-selection-container">
            <div class="guild-card" data-guild="Streetfolk">
              <h4>Streetfolk</h4>
              <ul>
                <li><strong>Hyve:</strong> Kissansilmät</li>
                <li>1x Satunnainen Tavara</li>
              </ul>
              <div class="guild-reward">
                <strong>Palkkio:</strong> 10 Shillinkiä
              </div>
            </div>
            <div class="guild-card" data-guild="Faithless">
              <h4>Faithless</h4>
              <ul>
                <li><strong>Hyve:</strong> Epäusko</li>
                <li>Voi ohittaa 1x MORAALI-tarkistuksen</li>
              </ul>
              <div class="guild-reward">
                <strong>Palkkio:</strong> 15 Shillinkiä
              </div>
            </div>
            <div class="guild-card" data-guild="Merchant">
              <h4>Merchant</h4>
              <ul>
                <li>Aletta 25% kaikesta</li>
              </ul>
              <div class="guild-reward">
                <strong>Palkkio:</strong> 20 Shillinkiä
              </div>
              <button id="enable-merchant-mode-btn" class="btn btn-sm">Enable Merchant Mode</button>
            </div>
            <div class="guild-card" data-guild="Fallen">
              <h4>Fallen</h4>
              <div class="guild-reward">
                <strong>Palkkio:</strong> 10 Shillinkiä
              </div>
              <table>
                <thead>
                  <tr><th>D4</th><th>Bonus</th></tr>
                </thead>
                <tbody>
                  <tr><td>1</td><td>Parannettu vampyyri</td></tr>
                  <tr><td>2</td><td>Parannettu ihmissusi</td></tr>
                  <tr><td>3</td><td><strong>Hyve:</strong> Kaikki aseet hopeisia</td></tr>
                  <tr><td>4</td><td><strong>Hyve:</strong> Kostonhimoinen (+3)</td></tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="prep-nav">
            <button class="btn btn-next-step" data-next="2">Seuraava <i class="fas fa-arrow-right"></i></button>
          </div>
        </div>

        <div class="prep-content-step" data-step-content="2">
          <div class="name-generator-container">
            <div class="dice-indicator">d100</div>
            <div class="name-generator-inputs">
              <input type="number" class="d-input-square" id="guild-name-input-1" min="1" max="100">
              <input type="number" class="d-input-square" id="guild-name-input-2" min="1" max="100">
            </div>
            <h3 id="guild-name-result"><span>-</span></h3>
          </div>
          <button id="toggle-name-tables-modal" class="btn btn-secondary">Näytä Taulukot</button>
          <div class="prep-nav">
            <button class="btn btn-secondary btn-prev-step" data-prev="1"><i class="fas fa-arrow-left"></i> Edellinen</button>
            <button class="btn btn-next-step" data-next="3">Seuraava <i class="fas fa-arrow-right"></i></button>
          </div>
        </div>

        <div class="prep-content-step" data-step-content="3">
          <div class="name-generator-container">
            <div class="dice-indicator">d100</div>
            <div class="name-generator-inputs">
              <input type="number" class="d-input-square" id="char-name-input" min="1" max="100">
            </div>
            <h3 id="char-name-result"><span>-</span></h3>
          </div>
          <button id="toggle-char-name-table-modal" class="btn btn-secondary">Näytä Taulukko</button>
          <div class="prep-nav">
            <button class="btn btn-secondary btn-prev-step" data-prev="2"><i class="fas fa-arrow-left"></i> Edellinen</button>
            <button class="btn btn-next-step" data-next="4">Seuraava <i class="fas fa-arrow-right"></i></button>
          </div>
        </div>

        <div class="prep-content-step" data-step-content="4">
          <div class="name-generator-container">
            <div class="dice-indicator">d100</div>
            <div class="name-generator-inputs">
              <input type="number" class="d-input-square" id="occupation-input" min="1" max="100">
            </div>
            <div id="occupation-result-display">
              </div>
          </div>

          <div id="occupation-reroll-section" class="hidden">
            <h4>Kaksoisvuoro! Syötä kaksi uutta d100-heittoa:</h4>
            <div class="name-generator-container">
              <div class="dice-indicator">d100</div>
              <div class="name-generator-inputs">
                <input type="number" class="d-input-square" id="occupation-reroll-1" min="1" max="100">
                <input type="number" class="d-input-square" id="occupation-reroll-2" min="1" max="100">
              </div>
              <div id="reroll-result-display-1" class="occupation-result-card"></div>
              <div id="reroll-result-display-2" class="occupation-result-card"></div>
            </div>
          </div>

          <button id="toggle-occupation-table-modal" class="btn btn-secondary">Näytä Taulukko</button>

          <div class="prep-nav">
            <button class="btn btn-secondary btn-prev-step" data-prev="3"><i class="fas fa-arrow-left"></i> Edellinen</button>
            <button class="btn btn-next-step" data-next="5">Seuraava <i class="fas fa-arrow-right"></i></button>
          </div>
        </div>

        <div class="prep-content-step" data-step-content="5">
          <h2>Vaihe 5: Stats</h2>
          <p>Tähän tulee hahmon stat-blockien generointi tai syöttö.</p>
          <div class="prep-nav">
            <button class="btn btn-secondary btn-prev-step" data-prev="4"><i class="fas fa-arrow-left"></i> Edellinen</button>
            <button class="btn btn-next-step" data-next="6">Seuraava <i class="fas fa-arrow-right"></i></button>
          </div>
        </div>

        <div class="prep-content-step" data-step-content="6">
          <div class="name-generator-container">
            <div class="dice-indicator">d20</div>
            <div class="name-generator-inputs">
              <input type="number" class="d-input-square" id="virtue-input" min="1" max="20">
            </div>
            <div id="virtue-result-display">
              </div>
          </div>
          <div class="prep-nav">
            <button class="btn btn-secondary btn-prev-step" data-prev="5"><i class="fas fa-arrow-left"></i> Edellinen</button>
            <button class="btn btn-next-step" data-next="7">Seuraava <i class="fas fa-arrow-right"></i></button>
          </div>
        </div>

        <div class="prep-content-step" data-step-content="7">
          <div class="name-generator-container">
            <div class="dice-indicator">d20</div>
            <div class="name-generator-inputs">
              <input type="number" class="d-input-square" id="vice-input" min="1" max="20">
            </div>
            <div id="vice-result-display">
              </div>
          </div>
          <div class="prep-nav">
            <button class="btn btn-secondary btn-prev-step" data-prev="6"><i class="fas fa-arrow-left"></i> Edellinen</button>
            <button class="btn btn-next-step" data-next="8">Seuraava <i class="fas fa-arrow-right"></i></button>
          </div>
        </div>

        <div class="prep-content-step" data-step-content="8">
          <h2>Vaihe 8: Omens</h2>
          <p>Heitä D2 jokaiselle pelaajalle määrittääksesi heidän Omen-numeronsa.</p>
          <div class="omen-roller">
            <button id="roll-omen" class="btn">Heitä Omen (d2)</button>
            <div id="omen-result">Omen: <span>-</span></div>
          </div>
          <div class="omen-options">
            <p><strong>1: Omen Effect 1 (Placeholder):</strong> Kuvaus Omen-efektille 1.</p>
            <p><strong>2: Omen Effect 2 (Placeholder):</strong> Kuvaus Omen-efektille 2.</p>
          </div>
          <div class="prep-nav">
            <button class="btn btn-secondary btn-prev-step" data-prev="7"><i class="fas fa-arrow-left"></i> Edellinen</button>
            <button id="reset-roadmap-new" class="btn btn-secondary">Aloita alusta</button>
          </div>
        </div>
      </div> </div> </div> <div id="tab-dm-screen" class="tab-content">
    
    <div id="dnd-initiative-tracker" class="hidden">
      <h3>Initiative Tracker (D&D 5e)</h3>
      <form id="initiative-form">
        <input type="text" id="init-name" placeholder="Character Name" required>
        <select id="init-class">
            <option value="fas fa-user-shield">Fighter</option>
            <option value="fas fa-wand-magic-sparkles">Wizard</option>
            <option value="fas fa-praying-hands">Cleric</option>
            <option value="fas fa-mask">Rogue</option>
            <option value="fas fa-paw">Druid</option>
            <option value="fas fa-music">Bard</option>
            <option value="fas fa-hammer">Paladin</option>
            <option value="fas fa-bow-arrow">Ranger</option>
            <option value="fas fa-dragon">Monster</option>
            <option value="fas fa-user">NPC</option>
        </select>
        <input type="number" id="init-roll" placeholder="Roll" required>
        <button type="submit" id="add-to-init" class="btn">Add</button>
      </form>
      <div class="init-controls" style="margin-top: 15px; display: flex; gap: 10px;">
        <button id="sort-init" class="btn btn-secondary">Sort</button>
        <button id="clear-init" class="btn btn-danger">Clear All</button>
      </div>
      <ul id="initiative-list" style="margin-top: 20px;"></ul>
    </div>
    
    <div id="dread-nights-active-screen" class="hidden">
      <h3>Dread Nights Screen</h3>
      <p>Tähän voi lisätä Dread Nights -pelin hallintatyökaluja.</p>
      <div class="card-grid">
        <div class="card">
          <div class="card-header">
            <h3><i class="fas fa-book-skull"></i> Quick Rules</h3>
            <button class="btn-collapse"><i class="fas fa-chevron-down"></i></button>
          </div>
          <div class="card-content">
            <p><strong>Morale Check:</strong> Roll d20. On 1-3, flee. On 4-6, freeze.</p>
            <p><strong>Infection:</strong> Roll d20 after being hit by undead...</p>
          </div>
        </div>
        <div class="card">
          <div class="card-header">
            <h3><i class="fas fa-map-signs"></i> Locations</h3>
            <button class="btn-collapse"><i class="fas fa-chevron-down"></i></button>
          </div>
          <div class="card-content">
            <p>The Old Church</p>
            <p>The Foggy Docks</p>
          </div>
        </div>
      </div>
    </div>
    
  </div> </div> <div id="name-tables-modal" class="modal-overlay">
  <div class="modal-content modal-wide">
    <button id="close-name-tables-modal" class="modal-close-btn">&times;</button>
    <h2>Killan Nimen Taulukot</h2>
    <div id="name-tables-content-modal" class="name-tables-container">
      </div>
  </div>
</div>

<div id="char-name-table-modal" class="modal-overlay">
  <div class="modal-content modal-wide">
    <button id="close-char-name-table-modal" class="modal-close-btn">&times;</button>
    <h2>Hahmon Nimen Taulukko</h2>
    <div id="char-name-table-content-modal" class="name-tables-container">
      </div>
  </div>
</div>

<div id="occupation-table-modal" class="modal-overlay">
  <div class="modal-content modal-wide">
    <button id="close-occupation-table-modal" class="modal-close-btn">&times;</button>
    <h2>Työnkuvien Taulukko</h2>
    <div id="occupation-table-content-modal" class="name-tables-container">
      </div>
  </div>
</div>

</body>
</html>