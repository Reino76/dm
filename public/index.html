<!DOCTYPE html>
<html>
<head>
<title>DM Screen</title>
<!-- Google Fonts (Updated to sharp "Inter") -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display.swap" rel="stylesheet">

<!-- Font Awesome CDN -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<link rel="stylesheet" href="style.css">
<script src="main.js"></script>
</head>
<body>

<div class="container">
  <div class="header">
    <button id="show-player-window-btn" class="btn btn-secondary" onclick="window.open('player.html', '_blank');">
      <i class="fas fa-window-restore"></i> Avaa pelaajan näyttö
    </button>
    
    <!-- UPDATED: Game Select moved to header -->
    <div id="game-title-container">
      <select id="game-select">
        <option value="Dread Nights">Kauhun yöt</option>
        <option value="D&D 5e">D&D 5e</option>
      </select>
    </div>
    <div id="merchant-mode-indicator" class="merchant-mode-indicator" style="display: none;">
      <span>Merchant Mode Active</span>
      <button id="disable-merchant-mode" class="btn btn-sm btn-danger">Disable</button>
    </div>
  </div>

  <div class="tabs">
    <button class="tab-button" data-tab="tab-prep">Valmistelu</button>
    <!-- REMOVED: Settings Tab -->
  </div>

  <div id="tab-prep" class="tab-content">
    <div class="prep-layout">
      <!-- Left Column: Roadmap -->
      <div class="prep-roadmap">
        <div class="prep-roadmap-step active" data-step="1">
          <span class="step-number">1</span>
          <span class="step-title">Killat</span>
        </div>
        <div class="prep-roadmap-step" data-step="2">
          <span class="step-number">2</span>
          <span class="step-title">Killan nimi</span>
        </div>
        <div class="prep-roadmap-step" data-step="3">
          <span class="step-number">3</span>
          <span class="step-title">Nimet</span>
        </div>
        <div class="prep-roadmap-step" data-step="4">
          <span class="step-number">4</span>
          <span class="step-title">Työnkuvat</span>
        </div>
        <div class="prep-roadmap-step" data-step="5">
          <span class="step-number">5</span>
          <span class="step-title">Stats</span>
        </div>
        <div class="prep-roadmap-step" data-step="6">
          <span class="step-number">6</span>
          <span class="step-title">Hyveet</span>
        </div>
        <div class="prep-roadmap-step" data-step="7">
          <span class="step-number">7</span>
          <span class="step-title">Paheet</span>
        </div>
        <div class="prep-roadmap-step" data-step="8">
          <span class="step-number">8</span>
          <span class="step-title">Omens</span>
        </div>
      </div>

      <!-- Right Column: Content -->
      <div class="prep-content">
        <!-- Step 1 Content -->
        <div class="prep-content-step active" data-step-content="1">
          <div class="guild-selection-container">
            <div class="guild-card" data-guild="Streetfolk">
              <h4>Streetfolk</h4>
              <ul>
                <li><strong>Hyve:</strong> Kissansilmät</li>
                <li>1x Satunnainen Tavara</li>
              </ul>
              <div class="guild-reward">
                <strong>Palkkio:</strong> 10 Shillinkiä
              </div>
            </div>
            <div class="guild-card" data-guild="Faithless">
              <h4>Faithless</h4>
              <ul>
                <li><strong>Hyve:</strong> Epäusko</li>
                <li>Voi ohittaa 1x MORAALI-tarkistuksen</li>
              </ul>
              <div class="guild-reward">
                <strong>Palkkio:</strong> 15 Shillinkiä
              </div>
            </div>
            <div class="guild-card" data-guild="Merchant">
              <h4>Merchant</h4>
              <ul>
                <li>Aletta 25% kaikesta</li>
              </ul>
              <div class="guild-reward">
                <strong>Palkkio:</strong> 20 Shillinkiä
              </div>
              <button id="enable-merchant-mode-btn" class="btn btn-sm">Enable Merchant Mode</button>
            </div>
            <div class="guild-card" data-guild="Fallen">
              <h4>Fallen</h4>
              <div class="guild-reward">
                <strong>Palkkio:</strong> 10 Shillinkiä
              </div>
              <table>
                <thead>
                  <tr><th>D4</th><th>Bonus</th></tr>
                </thead>
                <tbody>
                  <tr><td>1</td><td>Parannettu vampyyri</td></tr>
                  <tr><td>2</td><td>Parannettu ihmissusi</td></tr>
                  <tr><td>3</td><td><strong>Hyve:</strong> Kaikki aseet hopeisia</td></tr>
                  <tr><td>4</td><td><strong>Hyve:</strong> Kostonhimoinen (+3)</td></tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="prep-nav">
            <button class="btn btn-next-step" data-next="2">Seuraava <i class="fas fa-arrow-right"></i></button>
          </div>
        </div>

        <!-- Step 2 Content -->
        <div class="prep-content-step" data-step-content="2">
          <div class="name-generator-container">
            <div class="dice-indicator">d100</div>
            <div class="name-generator-inputs">
              <div class="d100-input-square" contenteditable="true" id="d100-input-1"></div>
              <div class="d100-input-square" contenteditable="true" id="d100-input-2"></div>
            </div>
            <h3 id="guild-name-result"><span>-</span></h3>
          </div>
          <button id="toggle-name-tables-modal" class="btn btn-secondary">Näytä Taulukot</button>
          <div class="prep-nav">
            <button class="btn btn-secondary btn-prev-step" data-prev="1"><i class="fas fa-arrow-left"></i> Edellinen</button>
            <button class="btn btn-next-step" data-next="3">Seuraava <i class="fas fa-arrow-right"></i></button>
          </div>
        </div>

        <!-- Step 3 Content -->
        <div class="prep-content-step" data-step-content="3">
          <div class="name-generator-container">
            <div class="dice-indicator">d100</div>
            <div class="name-generator-inputs">
              <div class="d100-input-square" contenteditable="true" id="d100-char-name-input"></div>
            </div>
            <h3 id="char-name-result"><span>-</span></h3>
          </div>
          <button id="toggle-char-name-table-modal" class="btn btn-secondary">Näytä Taulukko</button>
          <div class="prep-nav">
            <button class="btn btn-secondary btn-prev-step" data-prev="2"><i class="fas fa-arrow-left"></i> Edellinen</button>
            <button class="btn btn-next-step" data-next="4">Seuraava <i class="fas fa-arrow-right"></i></button>
          </div>
        </div>

        <!-- Step 4 Content -->
        <div class="prep-content-step" data-step-content="4">
          <div class="name-generator-container">
            <div class="dice-indicator">d100</div>
            <div class="name-generator-inputs">
              <div class="d100-input-square" contenteditable="true" id="d100-occupation-input"></div>
            </div>
            <div id="occupation-result-display">
              <!-- Result will be injected here -->
            </div>
          </div>

          <!-- Reroll section for roll 50 -->
          <div id="occupation-reroll-section" style="display: none;">
            <h4>Kaksoisvuoro! Syötä kaksi uutta d100-heittoa:</h4>
            <div class="name-generator-container">
              <div class="dice-indicator">d100</div>
              <div class="name-generator-inputs">
                <div class="d100-input-square" contenteditable="true" id="d100-reroll-input-1"></div>
                <div class="d100-input-square" contenteditable="true" id="d100-reroll-input-2"></div>
              </div>
              <div id="reroll-result-display-1" class="occupation-result-card"></div>
              <div id="reroll-result-display-2" class="occupation-result-card"></div>
            </div>
          </div>

          <button id="toggle-occupation-table-modal" class="btn btn-secondary">Näytä Taulukko</button>

          <div class="prep-nav">
            <button class="btn btn-secondary btn-prev-step" data-prev="3"><i class="fas fa-arrow-left"></i> Edellinen</button>
            <button class="btn btn-next-step" data-next="5">Seuraava <i class="fas fa-arrow-right"></i></button>
          </div>
        </div>

        <!-- Step 5 Content -->
        <div class="prep-content-step" data-step-content="5">
          <div class="prep-nav">
            <button class="btn btn-secondary btn-prev-step" data-prev="4"><i class="fas fa-arrow-left"></i> Edellinen</button>
            <button class="btn btn-next-step" data-next="6">Seuraava <i class="fas fa-arrow-right"></i></button>
          </div>
        </div>

        <!-- Step 6 Content -->
        <div class="prep-content-step" data-step-content="6">
          <div class="name-generator-container">
            <div class="dice-indicator">d20</div>
            <div class="name-generator-inputs">
              <div class="d100-input-square" contenteditable="true" id="d20-virtue-input"></div>
            </div>
            <div id="virtue-result-display">
              <!-- Result will be injected here -->
            </div>
          </div>
          <div class="prep-nav">
            <button class="btn btn-secondary btn-prev-step" data-prev="5"><i class="fas fa-arrow-left"></i> Edellinen</button>
            <button class="btn btn-next-step" data-next="7">Seuraava <i class="fas fa-arrow-right"></i></button>
          </div>
        </div>

        <!-- Step 7 Content -->
        <div class="prep-content-step" data-step-content="7">
          <div class="name-generator-container">
            <div class="dice-indicator">d20</div>
            <div class="name-generator-inputs">
              <div class="d100-input-square" contenteditable="true" id="d20-vice-input"></div>
            </div>
            <div id="vice-result-display">
              <!-- Result will be injected here -->
            </div>
          </div>
          <div class="prep-nav">
            <button class="btn btn-secondary btn-prev-step" data-prev="6"><i class="fas fa-arrow-left"></i> Edellinen</button>
            <button class="btn btn-next-step" data-next="8">Seuraava <i class="fas fa-arrow-right"></i></button>
          </div>
        </div>

        <!-- Step 8 Content -->
        <div class="prep-content-step" data-step-content="8">
          <h2>Vaihe 8: Omens</h2>
          <p>Heitä D2 jokaiselle pelaajalle määrittääksesi heidän Omen-numeronsa.</p>
          <div class="omen-options">
            <p><strong>1: Omen Effect 1 (Placeholder):</strong> Kuvaus Omen-efektille 1.</p>
            <p><strong>2: Omen Effect 2 (Placeholder):</strong> Kuvaus Omen-efektille 2.</p>
          </div>
          <div class="prep-nav">
            <button class="btn btn-secondary btn-prev-step" data-prev="7"><i class="fas fa-arrow-left"></i> Edellinen</button>
            <button id="reset-roadmap-new" class="btn btn-secondary">Aloita alusta</button>
          </div>
        </div>
      </div>
    </div>
  </div>



  <!-- REMOVED: Settings Tab -->

</div> <!-- /container -->

<!-- Guild Name Tables Modal -->
<div id="name-tables-modal" class="modal-overlay">
  <div class="modal-content modal-wide">
    <button id="close-name-tables-modal" class="modal-close-btn">&times;</button>
    <h2>Killan Nimen Taulukot</h2>
    <div id="name-tables-content-modal" class="name-tables-container">
      <!-- Tables will be populated by JavaScript -->
    </div>
  </div>
</div>

<!-- Char Name Table Modal -->
<div id="char-name-table-modal" class="modal-overlay">
  <div class="modal-content modal-wide">
    <button id="close-char-name-table-modal" class="modal-close-btn">&times;</button>
    <h2>Hahmon Nimen Taulukko</h2>
    <div id="char-name-table-content-modal" class="name-tables-container">
      <!-- Table will be populated by JavaScript -->
    </div>
  </div>
</div>

<!-- Occupation Table Modal -->
<div id="occupation-table-modal" class="modal-overlay">
  <div class="modal-content modal-wide">
    <button id="close-occupation-table-modal" class="modal-close-btn">&times;</button>
    <h2>Työnkuvien Taulukko</h2>
    <div id="occupation-table-content-modal" class="name-tables-container">
      <!-- Table will be populated by JavaScript -->
    </div>
  </div>
</div>

</body>
</html>